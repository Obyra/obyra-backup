<svg xmlns="http://www.w3.org/2000/svg" width="960" height="600" viewBox="0 0 960 600">
  <style>
    .node { fill:#edf2ff; stroke:#2c5282; stroke-width:1.5; rx:12; ry:12; }
    .legacy { fill:#ffe3e3; stroke:#c53030; }
    .service { fill:#e6fffa; stroke:#2f855a; }
    .edge { stroke:#2d3748; stroke-width:1.2; marker-end:url(#arrow); }
    text { font-family:'Segoe UI', sans-serif; font-size:14px; fill:#1a202c; }
    .title { font-size:20px; font-weight:bold; }
    .legend { font-size:12px; fill:#4a5568; }
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L10,3 L0,6 z" fill="#2d3748" />
    </marker>
  </defs>
  <text x="20" y="30" class="title">Module dependency sketch</text>
  <text x="20" y="55" class="legend">Focus on marketplace duplication and service hooks. Red nodes = legacy.</text>

  <!-- Core nodes -->
  <rect class="node" x="420" y="80" width="160" height="60" />
  <text x="500" y="110" text-anchor="middle">app.py</text>
  <text x="500" y="130" text-anchor="middle" class="legend">Bootstrap & registration</text>

  <rect class="node" x="200" y="200" width="180" height="60" />
  <text x="290" y="230" text-anchor="middle">auth.py</text>

  <rect class="node" x="420" y="200" width="180" height="60" />
  <text x="510" y="230" text-anchor="middle">presupuestos.py</text>

  <rect class="node" x="640" y="200" width="200" height="60" />
  <text x="740" y="230" text-anchor="middle">marketplace/routes.py</text>

  <!-- Services -->
  <rect class="node service" x="420" y="360" width="180" height="60" />
  <text x="510" y="390" text-anchor="middle">services.wizard_budgeting</text>

  <rect class="node service" x="200" y="360" width="180" height="60" />
  <text x="290" y="390" text-anchor="middle">services.email_service</text>

  <rect class="node service" x="660" y="360" width="180" height="60" />
  <text x="750" y="390" text-anchor="middle">mercadopago.SDK</text>

  <!-- Legacy nodes -->
  <rect class="node legacy" x="80" y="80" width="180" height="60" />
  <text x="170" y="110" text-anchor="middle">app_old.py</text>

  <rect class="node legacy" x="60" y="220" width="160" height="60" />
  <text x="140" y="250" text-anchor="middle">marketplace.py</text>

  <rect class="node legacy" x="60" y="360" width="160" height="60" />
  <text x="140" y="390" text-anchor="middle">marketplace_new.py</text>

  <rect class="node legacy" x="820" y="80" width="160" height="60" />
  <text x="900" y="110" text-anchor="middle">marketplace_payments.py</text>

  <!-- Edges -->
  <line class="edge" x1="500" y1="140" x2="500" y2="200" />
  <line class="edge" x1="500" y1="140" x2="320" y2="200" />
  <line class="edge" x1="500" y1="140" x2="740" y2="200" />
  <line class="edge" x1="500" y1="140" x2="170" y2="140" />

  <line class="edge" x1="290" y1="260" x2="290" y2="360" />
  <line class="edge" x1="510" y1="260" x2="510" y2="360" />
  <line class="edge" x1="740" y1="260" x2="750" y2="360" />

  <line class="edge" x1="140" y1="280" x2="140" y2="360" />
  <line class="edge" x1="170" y1="140" x2="140" y2="220" />
  <line class="edge" x1="740" y1="200" x2="900" y2="140" />
</svg>
