<svg xmlns="http://www.w3.org/2000/svg" width="960" height="540" viewBox="0 0 960 540">
  <style>
    .node { fill:#f8f9fa; stroke:#4a5568; stroke-width:1.5; rx:10; ry:10; }
    .edge { stroke:#4a5568; stroke-width:1.2; marker-end:url(#arrow); }
    text { font-family:'Segoe UI', sans-serif; font-size:14px; fill:#1a202c; }
    .title { font-size:20px; font-weight:bold; }
    .subtitle { font-size:16px; font-weight:bold; }
    .legend { font-size:12px; fill:#4a5568; }
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L10,3 L0,6 z" fill="#4a5568" />
    </marker>
  </defs>
  <text x="20" y="30" class="title">Obyra â€“ High-level routing</text>
  <text x="20" y="55" class="legend">Each branch links a registered Flask blueprint to one representative endpoint and the service layer it touches.</text>

  <!-- App node -->
  <rect class="node" x="410" y="80" width="140" height="60" />
  <text x="480" y="115" text-anchor="middle" class="subtitle">Flask app</text>
  <text x="480" y="135" text-anchor="middle" class="legend">`app.py` bootstrap</text>

  <!-- Auth branch -->
  <rect class="node" x="120" y="180" width="180" height="60" />
  <text x="210" y="210" text-anchor="middle" class="subtitle">auth_bp</text>
  <text x="210" y="230" text-anchor="middle" class="legend">`/auth` routes</text>
  <line class="edge" x1="480" y1="140" x2="300" y2="200" />

  <rect class="node" x="80" y="280" width="200" height="60" />
  <text x="180" y="310" text-anchor="middle">POST /auth/forgot</text>
  <text x="180" y="330" text-anchor="middle" class="legend">Password reset</text>
  <line class="edge" x1="210" y1="240" x2="180" y2="280" />

  <rect class="node" x="60" y="380" width="220" height="60" />
  <text x="170" y="410" text-anchor="middle">services.email_service</text>
  <text x="170" y="430" text-anchor="middle" class="legend">`send_email`</text>
  <line class="edge" x1="180" y1="340" x2="170" y2="380" />

  <!-- Presupuestos branch -->
  <rect class="node" x="390" y="200" width="180" height="60" />
  <text x="480" y="230" text-anchor="middle" class="subtitle">presupuestos_bp</text>
  <text x="480" y="250" text-anchor="middle" class="legend">`/presupuestos`</text>
  <line class="edge" x1="480" y1="140" x2="480" y2="200" />

  <rect class="node" x="360" y="300" width="240" height="60" />
  <text x="480" y="330" text-anchor="middle">POST /presupuestos/ia/calcular/etapas</text>
  <text x="480" y="350" text-anchor="middle" class="legend">IA calculator</text>
  <line class="edge" x1="480" y1="260" x2="480" y2="300" />

  <rect class="node" x="340" y="400" width="260" height="60" />
  <text x="470" y="430" text-anchor="middle">services.wizard_budgeting</text>
  <text x="470" y="450" text-anchor="middle" class="legend">Stage breakdown logic</text>
  <line class="edge" x1="480" y1="360" x2="470" y2="400" />

  <!-- Marketplace branch -->
  <rect class="node" x="660" y="180" width="200" height="60" />
  <text x="760" y="210" text-anchor="middle" class="subtitle">marketplace_bp</text>
  <text x="760" y="230" text-anchor="middle" class="legend">`marketplace.routes`</text>
  <line class="edge" x1="520" y1="140" x2="660" y2="200" />

  <rect class="node" x="640" y="280" width="240" height="60" />
  <text x="760" y="310" text-anchor="middle">POST /api/market/checkout</text>
  <text x="760" y="330" text-anchor="middle" class="legend">Order creation</text>
  <line class="edge" x1="760" y1="240" x2="760" y2="280" />

  <rect class="node" x="620" y="380" width="260" height="60" />
  <text x="750" y="410" text-anchor="middle">mercadopago.SDK</text>
  <text x="750" y="430" text-anchor="middle" class="legend">Preference + payment flow</text>
  <line class="edge" x1="760" y1="340" x2="750" y2="380" />
</svg>
