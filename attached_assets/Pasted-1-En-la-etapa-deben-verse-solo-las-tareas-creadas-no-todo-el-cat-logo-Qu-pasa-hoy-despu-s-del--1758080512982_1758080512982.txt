1) En la etapa deben verse solo las tareas creadas (no todo el catálogo)

Qué pasa hoy: después del wizard vuelven a aparecer todas las “sugeridas” de la etapa.
Qué quiero: que, al cerrar el wizard, la lista de tareas de la etapa se recargue desde BD y se muestren únicamente las tareas realmente existentes. Ninguna “sugerida” a menos que yo la agregue manualmente.

Acciones:

La vista de etapa debe renderizar solo el resultado del API de tareas existentes (DB). Nada del catálogo.

Al terminar /obras/api/wizard-tareas/create, refrescar la lista (fetch + render), no reutilizar el preview.

Revisar que el botón “Eliminar seleccionadas” funcione con los checkboxes (tareas y etapas). Si hay 404, las rutas deben ser /obras/api/tareas/bulk_delete y /obras/api/etapas/bulk_delete (JSON siempre).

Criterios de aceptación:

Creo 1–2 tareas con el wizard → al cerrar, en la etapa solo veo esas 1–2 (no aparecen “tareas sugeridas” extra).

Bulk delete: selecciono 2 tareas → “Eliminar seleccionadas” → se borran y la lista se actualiza sin recargar toda la página.

2) Tarjeta de tarea con toda la info del wizard

Qué quiero ver en cada tarjeta (como chips/badges, compacto):

Inicio → Fin (fechas planificadas)

Horas Est. (número de horas)

Cantidad + Unidad (m², m³, ml, un) — no “Horas” como unidad

Asignado a (nombre)

Prioridad (Baja/Norm/Alta con color)

Además:

Mostrar mini-galería con las 3 últimas fotos de avances (si existen). Al hacer click, abrir modal con la galería completa y detalles del avance (nota, fecha).

Un contador “N registros” debe abrir el modal de avances.

Criterios de aceptación:

En la etapa, cada tarjeta muestra: 18/09 → 25/09 · 40 h · 150 m² · momi giardina · Norm.

Si hay avances con fotos, veo 3 miniaturas y puedo abrirlas en un modal.

En los selectores de unidad ya no aparece “Horas” (si hay tareas viejas con unidad “h”, normalizarlas a “un”; las horas siguen en “Horas Est.”).

3) Alertas en Dashboard por vencimiento

Qué quiero: si una tarea está vencida (Fin planificada < hoy y estado ≠ completada), quiero una alerta visible en el dashboard y que la tarjeta de tarea se destaque.

Acciones:

Endpoint nuevo (o ampliar uno existente) tipo /obras/api/dashboard/alerts que devuelva JSON:

overdue_count (vencidas)

due_today_count (vencen hoy)

upcoming_count (próximas 3 días)

En el dashboard: badge rojo para vencidas, amarillo para hoy, azul para próximas.

En la lista de tareas: si está vencida, borde/ícono rojo y tooltip “Vencida”.

Criterios de aceptación:

Tengo una tarea con Fin en el pasado y pendiente → el dashboard muestra overdue_count > 0 y la tarjeta aparece marcada como vencida.

4) Errores del wizard siempre en JSON + mensaje en el paso

Qué quiero: si algo falla en preview o create, ver el mensaje real en el contenedor del paso (sin pop-ups genéricos).

Acciones:

Todos los endpoints del wizard responden application/json también en error (401/403/404/500).

En los pasos del wizard, los errores se muestran en el panel del paso (no alerts ni diálogos del navegador).

Criterios de aceptación:

Si algo falla, veo un bloque rojo en el paso con el texto del error del backend.