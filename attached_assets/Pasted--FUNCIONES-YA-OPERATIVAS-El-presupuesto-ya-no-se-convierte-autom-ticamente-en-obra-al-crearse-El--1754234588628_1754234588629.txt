âœ… FUNCIONES YA OPERATIVAS
El presupuesto ya no se convierte automÃ¡ticamente en obra al crearse.

El botÃ³n "Confirmar como Obra" aparece correctamente cuando el estado es â€œborradorâ€.

Al confirmar, se genera correctamente una obra con sus etapas y tareas precargadas.

Se evita la duplicaciÃ³n de etapas o tareas si ya existen.

El workflow de creaciÃ³n desde presupuesto a obra estÃ¡ funcional.

ğŸ§¹ AJUSTES NECESARIOS
ğŸ”´ 0. Eliminar el presupuesto una vez confirmado como obra
SituaciÃ³n actual:
El presupuesto sigue figurando en el mÃ³dulo de â€œPresupuestosâ€ aun despuÃ©s de haber sido convertido en obra.

Requerimiento:

Una vez confirmada la obra, el presupuesto debe eliminarse de la lista.

Alternativamente, puede quedar registrado como "convertido" para historial, pero no debe mostrarse en la interfaz.

AcciÃ³n recomendada en backend:

python
Copiar
Editar
presupuesto.delete()
# o
presupuesto.estado = "convertido"
presupuesto.save()
AcciÃ³n recomendada en frontend:

Excluir presupuestos con estado â€œconvertidoâ€ del listado de presupuestos.

ğŸŸ¡ 1. SelecciÃ³n de etapas antes de confirmar como obra
SituaciÃ³n actual:
El sistema carga automÃ¡ticamente todas las etapas predefinidas al confirmar una obra.

Requerimiento:

El usuario debe poder seleccionar quÃ© etapas incluir, antes de confirmar.

SoluciÃ³n propuesta:

Al hacer clic en "Confirmar como Obra", mostrar un modal con checkboxes de las etapas disponibles.

Enviar solo las etapas seleccionadas al backend.

Crear solo esas etapas en la obra.

Ejemplo de cÃ³digo frontend (pseudo):

html
Copiar
Editar
<form>
  <input type="checkbox" name="etapas" value="estructura"> Estructura<br>
  <input type="checkbox" name="etapas" value="mamposteria"> MamposterÃ­a<br>
  ...
</form>
Backend:

python
Copiar
Editar
for etapa in etapas_seleccionadas:
    crear_etapa(etapa)
ğŸŸ¡ 2. Agregar tareas como mÃºltiple choice
SituaciÃ³n actual:
El sistema permite agregar tareas escribiendo texto libre.

Requerimiento:

Debe haber una lista desplegable o campo tipo "autocomplete" con tareas predefinidas.

Si la tarea tiene una descripciÃ³n predefinida, debe autocompletarse al seleccionarla.

SoluciÃ³n propuesta:

Reemplazar el campo de texto actual por un <select> o un componente autocomplete.

Cargar el catÃ¡logo de tareas predefinidas desde el backend (o tenerlo cacheado en el JS).

Extra Ãºtil:

Incluir una opciÃ³n: [ ] Tarea personalizada que habilite los campos manuales si el usuario quiere escribir algo nuevo.

ğŸŸ¡ 3. EdiciÃ³n de tareas en obra confirmada
SituaciÃ³n actual:
Una vez que la obra estÃ¡ confirmada, no se pueden editar tareas ni etapas.

Requerimiento:

Se debe permitir la ediciÃ³n de tareas para usuarios con permisos (admin o encargado).

QuÃ© se puede editar:

Marcar tareas como completadas

Cambiar horas estimadas

Asignar responsables

Agregar nuevas tareas o etapas si es necesario

Extra (opcional):

Crear un estado intermedio:
â€œğŸŸ¡ Planificadaâ€ â†’ editable
â€œğŸŸ¢ En ejecuciÃ³nâ€ â†’ solo lectura parcial

