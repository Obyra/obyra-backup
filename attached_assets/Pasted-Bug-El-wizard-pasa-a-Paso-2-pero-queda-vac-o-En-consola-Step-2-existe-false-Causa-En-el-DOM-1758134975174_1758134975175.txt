Bug: El wizard pasa a Paso 2 pero queda vacío. En consola: “¿Step 2 existe? false”.
Causa: En el DOM del modal no hay contenedor para el Paso 2 (ni #wizardPaso2 ni data-paso="2").

Necesitamos en templates/obras/detalle.html (dentro del modal #wizardTareasModal):

<!-- Paso 1: Etapas (ya existe) -->
<div id="wizardPaso1" data-paso="1">
  <!-- contenido actual del catálogo -->
</div>

<!-- Paso 2: Tareas (AGREGAR) -->
<div id="wizardPaso2" data-paso="2" class="d-none">
  <h5 class="mb-3">2. Tareas</h5>
  <div id="wizardSpinnerTareas" class="text-center my-3 d-none">Cargando…</div>
  <div id="wizardListaTareas"></div>
</div>

<!-- (Opcional) Paso 3 y Paso 4 para que la navegación no falle luego -->
<div id="wizardPaso3" data-paso="3" class="d-none"></div>
<div id="wizardPaso4" data-paso="4" class="d-none"></div>


Y en static/js/wizard.js:

Al terminar Paso 1 (en applyCatalogAndAdvance()), llamar a:

window.gotoPaso(2);
loadTareasWizard(getObraId(), getEtapasSeleccionadas());


Implementar loadTareasWizard(obraId, slugs) para pedir y pintar tareas en #wizardListaTareas:

async function loadTareasWizard(obraId, slugs) {
  const m = document.getElementById('wizardTareasModal');
  const list = m.querySelector('#wizardListaTareas') || m.querySelector('#wizardPaso2');
  const spin = m.querySelector('#wizardSpinnerTareas');
  spin?.classList.remove('d-none'); if (list) list.innerHTML = '';
  // Ajustar a su API (POST/GET):
  const res  = await fetch('/obras/api/wizard-tareas/tareas', {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    credentials: 'include',
    body: JSON.stringify({ obra_id: obraId, etapas: slugs })
  });
  const json   = await res.json();
  const tareas = json.tareas_catalogo || json.tareas || json.data || [];
  spin?.classList.add('d-none');
  list.innerHTML = tareas.length
    ? tareas.map(t => `
        <div class="form-check my-1">
          <input class="form-check-input tarea-checkbox" type="checkbox" data-id="${t.id}">
          <label class="form-check-label">${t.nombre}</label>
        </div>`).join('')
    : '<div class="text-muted p-3">No hay tareas para las etapas seleccionadas.</div>';
  console.log('[WZ] Tareas cargadas:', tareas.length);
}


Confirmar que existen estos IDs:
wizardBtnSiguiente, btnAgregarEtapas, wizardPaso1, wizardPaso2 (o data-paso="1|2").

Prueba:
Abrir wizard → seleccionar ≥1 etapa → Siguiente → se ve “2. Tareas” con lista pintada. En Network, se ve la request a tareas.