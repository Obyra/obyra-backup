Pedido para Replit (paso a paso)
1) Helper de permisos (si no existe)
# utils/permissions.py (o donde tengas helpers)
def is_admin_or_pm(user):
    return getattr(user, "role", None) in ("admin", "pm")

2) Proteger la ruta del Dashboard

En el blueprint / vista del dashboard (ej. main.dashboard o dashboard_bp.index):

from flask_login import login_required, current_user
from flask import redirect, url_for

@main_bp.route("/")           # o la ruta del Dashboard
@main_bp.route("/dashboard")  # si existe
@login_required
def dashboard():
    # Si es operario, NO ve dashboard → lo mandamos a Mis Tareas
    if getattr(current_user, "role", None) == "operario":
        return redirect(url_for("obras.mis_tareas"))
    # Admin y PM siguen viendo el dashboard
    # (aca va la lógica actual de métricas, obras, etc.)
    return render_template("dashboard/index.html", ...)


Nota: Esto además evita que un operario entre por URL directa.

3) Redirección post-login por rol (UX prolija)

En el controlador de login (después de autenticar):

if current_user.role == "operario":
    return redirect(url_for("obras.mis_tareas"))
return redirect(url_for("main.dashboard"))

4) Ocultar la entrada “Dashboard” en el menú

En templates/base.html (navbar):

{# Enlace a Dashboard solo para admin/pm #}
{% if current_user.is_authenticated and current_user.role in ['admin','pm'] %}
  <li><a href="{{ url_for('main.dashboard') }}">Dashboard</a></li>
{% endif %}


Y si el logo / “home” apunta al dashboard, que respete el rol:

<a class="navbar-brand"
   href="{{ url_for('obras.mis_tareas') if current_user.is_authenticated and current_user.role=='operario' else url_for('main.dashboard') }}">
  OBYRA IA
</a>

5) (Opcional) Ahorro de recursos

Cuando role == 'operario', no ejecutes queries pesadas del dashboard (de todos modos ya redirigimos, pero por las dudas).

Criterios de aceptación (rápidos)

Usuario operario:

Al loguearse → cae en /mis-tareas.

Si intenta /dashboard o / → redirige a /mis-tareas.

En el menú no aparece “Dashboard”.

Usuario admin/pm:

Ve el Dashboard como siempre (tarjetas, KPIs).

Botón/brand “home” lo lleva al Dashboard.