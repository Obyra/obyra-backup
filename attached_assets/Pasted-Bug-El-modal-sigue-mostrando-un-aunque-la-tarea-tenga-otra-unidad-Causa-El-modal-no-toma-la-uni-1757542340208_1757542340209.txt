Bug: El modal sigue mostrando “un” aunque la tarea tenga otra unidad.
Causa: El modal no toma la unidad desde el botón que lo dispara (o se resetea después de setearla).

Acción exacta (Bootstrap): poblar los labels en el evento show.bs.modal usando event.relatedTarget (funciona en detalle y mis_tareas).

const modal = document.getElementById('modalAvance');
modal.addEventListener('show.bs.modal', (event) => {
  const btn = event.relatedTarget; // botón que abrió el modal
  const u = btn?.dataset?.unidad || 'un';
  const r = btn?.dataset?.rendimiento || '';
  const tareaId = btn?.dataset?.tareaId || '';

  document.getElementById('lbl-cantidad').textContent = `Cantidad ejecutada (${u}) *`;
  document.getElementById('chip-unidad').textContent = u;
  document.getElementById('rendimiento').value = r;
  document.getElementById('tarea_id').value = tareaId;

  // autoconversión cantidad↔horas si hay rendimiento
  const qty = document.getElementById('cantidad');
  const hrs = document.getElementById('horas');
  const rr = parseFloat(r);
  qty.oninput = hrs.oninput = null; // evitar handlers duplicados
  if (!isNaN(rr) && rr > 0) {
    hrs.oninput = () => { if (hrs.value && !qty.value) qty.value = (parseFloat(hrs.value)*rr).toFixed(2); };
    qty.oninput = () => { if (qty.value && !hrs.value) hrs.value = (parseFloat(qty.value)/rr).toFixed(2); };
  }
});


Botón que abre el modal (en todas las listas):

<button class="btn-avance"
        data-bs-toggle="modal" data-bs-target="#modalAvance"
        data-tarea-id="{{ t.id }}"
        data-unidad="{{ t.unidad or 'un' }}"
        data-rendimiento="{{ t.rendimiento or '' }}">
  + Avance
</button>


Importante: no llamar a form.reset() después de setear la unidad; si necesitan resetear, háganlo antes del show.bs.modal o dentro del handler pero volviendo a setear los labels/chips.

Criterio de aceptación:

El botón tiene data-unidad="m2" para la tarea de muros.

Al abrir el modal se ve “Cantidad ejecutada (m²)” y el chip m².

Cambiar la unidad de la tarea a ml y volver a abrir muestra ml.

El backend sigue usando la unidad del servidor al guardar.