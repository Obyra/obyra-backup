Bug: En el wizard, Paso 2 → Paso 3 navega, pero la tabla del Paso 3 queda vacía. Los logs muestran “WIZARD Paso 2: N tareas seleccionadas”, sin embargo en Paso 3 window.WZ_STATE.tareasSel está vacío, por lo que renderPaso3 renderiza 0 filas.

Causa: No se guarda la selección antes de navegar. El click handler de #wizardBtnSiguiente no captura las tareas tildadas del Paso 2 y no las persiste en window.WZ_STATE.

Corrección solicitada (en static/js/wizard.js):

Hacer global la función de pintado y usar un selector robusto para el <tbody> de Paso 3:

window.renderPaso3 = function renderPaso3(tareas = []) {
  const m = document.getElementById('wizardTareasModal');
  const tbody = m.querySelector('#wizardStep3 #tablaDatosWizard tbody, #wizardPaso3 #tablaDatosWizard tbody');
  if (!tbody) { console.warn('[WZ] Falta tbody en Paso 3'); return; }

  tbody.innerHTML = tareas.map((t, i) => `
    <tr>
      <td>${t.etapa_slug || ''}</td>
      <td>${t.nombre}</td>
      <td><input type="date"   name="rows[${i}][inicio]"   class="form-control form-control-sm"></td>
      <td><input type="date"   name="rows[${i}][fin]"      class="form-control form-control-sm"></td>
      <td><input type="number" name="rows[${i}][horas]"    step="0.5"  min="0" class="form-control form-control-sm"></td>
      <td><input type="number" name="rows[${i}][cantidad]" step="0.01" min="0" class="form-control form-control-sm"></td>
      <td><input type="text"   name="rows[${i}][unidad]"   class="form-control form-control-sm"></td>
      <td><input type="text"   name="rows[${i}][asignado]" class="form-control form-control-sm"></td>
      <td>
        <select class="form-select form-select-sm" name="rows[${i}][prioridad]">
          <option value="media" selected>Media</option>
          <option value="alta">Alta</option>
          <option value="baja">Baja</option>
        </select>
      </td>
    </tr>
  `).join('');

  const next = document.getElementById('wizardBtnSiguiente');
  if (next) { next.disabled = tareas.length === 0; next.classList.toggle('disabled', tareas.length === 0); next.type = 'button'; }
  console.log('[WZ] Paso 3 renderizado con', tareas.length, 'filas');
};


Capturar las tareas tildadas al hacer click en Siguiente mientras está visible el Paso 2, guardarlas y recién ahí navegar + pintar:

(function connectPaso2Next(){
  const m   = document.getElementById('wizardTareasModal');
  const btn = document.getElementById('wizardBtnSiguiente');
  if (!m || !btn) return;

  // evita enganchar múltiples veces
  if (btn.dataset.boundStep2) return;
  btn.dataset.boundStep2 = '1';
  btn.type = 'button';

  btn.addEventListener('click', (ev) => {
    // sólo interceptar si estamos en Paso 2 (pane visible)
    const step2Visible = !!m.querySelector('#wizardStep2:not(.d-none), #wizardPaso2:not(.d-none)');
    if (!step2Visible) return; // dejar fluir para los otros pasos

    // capturar selección de Paso 2
    const checks = [...m.querySelectorAll('#wizardStep2 input[type="checkbox"]:checked, #wizardPaso2 input[type="checkbox"]:checked')];
    const sel = checks.map((cb, i) => {
      const label = cb.closest('.form-check')?.querySelector('label')?.textContent?.trim() || `Tarea ${i+1}`;
      return {
        id: cb.dataset.id || cb.value || `t${i+1}`,
        nombre: cb.dataset.nombre || label,
        etapa_slug: cb.dataset.etapa || ''
      };
    });

    console.log('WIZARD: Paso 2 selección =', sel.length);
    if (!sel.length) return;

    ev.preventDefault();
    window.WZ_STATE = window.WZ_STATE || {};
    window.WZ_STATE.tareasSel = sel;

    // pintar y navegar
    if (typeof window.renderPaso3 === 'function') window.renderPaso3(sel);
    if (typeof window.gotoPaso    === 'function') window.gotoPaso(3);
  });
})();


Botón Atrás en Paso 3 → Paso 2, preservando selección (opcional pero recomendado):

(function connectPaso3Back(){
  const m    = document.getElementById('wizardTareasModal');
  const back = document.getElementById('wizardBtnAnteriorPaso3');
  if (!m || !back || back.dataset.bound) return;
  back.dataset.bound = '1';
  back.type = 'button';
  back.addEventListener('click', (e) => { e.preventDefault(); window.gotoPaso?.(2); });
})();


Verificar que el template de Paso 3 tenga:

contenedor #wizardStep3 (o #wizardPaso3) visible en ese paso

<table id="tablaDatosWizard"><tbody></tbody></table> dentro del pane