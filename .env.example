# --- Flask / runtime ---
FLASK_APP=app.py
FLASK_ENV=development
FLASK_RUN_PORT=8080
FLASK_DEBUG=1
PYTHONIOENCODING=utf-8

# --- Seguridad ---
# Generar un secreto fuerte: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=
SESSION_SECRET=${SECRET_KEY}

# --- Base de datos (PostgreSQL con psycopg 3) ---
# Ejemplo DEV local con contenedor en 5435 (obyra-pg-stg):
# docker run --name obyra-pg-stg -p 5435:5432 -e POSTGRES_USER=obyra -e POSTGRES_PASSWORD=obyra -e POSTGRES_DB=obyra_dev -d postgres:16
# Agregar "?sslmode=require" si tu proveedor exige TLS.
DATABASE_URL=postgresql+psycopg://obyra:obyra@localhost:5435/obyra_dev
SQLALCHEMY_POOL_SIZE=10
SQLALCHEMY_MAX_OVERFLOW=10
SQLALCHEMY_POOL_TIMEOUT=30

# URL separada para migraciones Alembic (rol obyra_migrator)
ALEMBIC_DATABASE_URL=postgresql+psycopg://obyra_migrator:REEMPLAZAR_CONTRASEÑA@localhost:5435/obyra_dev

# --- Feature flags ---
# WIZARD_BUDGET_* habilitan el nuevo flujo de presupuestos (shadow mode recomendado en DEV).
WIZARD_BUDGET_BREAKDOWN_ENABLED=false
WIZARD_BUDGET_SHADOW_MODE=true
# SHOW_IA_CALCULATOR_BUTTON controla el acceso rápido a la calculadora IA.
SHOW_IA_CALCULATOR_BUTTON=false
# ENABLE_REPORTS activa la generación de PDF con WeasyPrint.
ENABLE_REPORTS=1
# ENABLE_GOOGLE_OAUTH_HELP muestra hints para configurar OAuth en onboarding.
ENABLE_GOOGLE_OAUTH_HELP=true

# --- Google OAuth (opcional) ---
GOOGLE_OAUTH_CLIENT_ID=
GOOGLE_OAUTH_CLIENT_SECRET=
# Callback típico: ${BASE_URL}/login/google/callback

# --- Mercado Pago (por ahora detrás de flag de marketplace) ---
# No es necesario configurarlo para correr la app mientras el marketplace esté deshabilitado.
MP_ACCESS_TOKEN=
MP_WEBHOOK_PUBLIC_URL=${BASE_URL}/api/market/payments/mp/webhook

# --- SMTP ---
# En DEV: Mailtrap; en STAGING/PROD: proveedor transaccional (SendGrid/SES/...)
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_USER=
SMTP_PASS=
SMTP_PASSWORD=${SMTP_PASS}
SMTP_USE_TLS=1
FROM_EMAIL=OBYRA IA <no-reply@obyra.local>
MAIL_FROM=${FROM_EMAIL}

# --- Mapas / Geocoding ---
MAPS_PROVIDER=nominatim
MAPS_API_KEY=
MAPS_USER_AGENT=obyra-dev-bot
GEOCODE_CACHE_TTL=3600

# --- Tipos de cambio ---
FX_PROVIDER=bna
EXCHANGE_FALLBACK_RATE=0

# --- IA / OpenAI (opcional) ---
OPENAI_API_KEY=

# --- Negocio ---
PLATFORM_COMMISSION_RATE=0.02

# --- Archivos / URLs ---
STORAGE_DIR=./storage
BASE_URL=http://127.0.0.1:8080
APP_BASE_URL=${BASE_URL}

# --- Notas de entorno ---
# STAGING:
#   FLASK_ENV=production
#   BASE_URL=https://staging.obyra.example
#   DATABASE_URL=postgresql+psycopg://USER:PASS@HOST:PORT/DB
#   ENABLE_GOOGLE_OAUTH_HELP=false
#
# PROD:
#   FLASK_ENV=production
#   BASE_URL=https://app.obyra.example
#   DATABASE_URL=postgresql+psycopg://USER:PASS@HOST:PORT/DB
#   ENABLE_GOOGLE_OAUTH_HELP=false
