# --- Flask / runtime ---
FLASK_APP=wsgi.py
FLASK_ENV=development
FLASK_RUN_PORT=8080
FLASK_DEBUG=1
PYTHONIOENCODING=utf-8

# --- Seguridad ---
# Generar un secreto fuerte: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=
SESSION_SECRET=${SECRET_KEY}

# --- Base de datos (PostgreSQL con psycopg 3) ---
# Ejemplo DEV local con Docker Compose (usa sslmode=disable vía DB_SSLMODE):
# docker compose up db
# DATABASE_URL sin parámetros extra y DB_SSLMODE=disable -> postgresql+psycopg://migrator:postgres@localhost:5432/obyra_dev
DATABASE_URL=postgresql+psycopg://USER:PASS@HOST:PORT/DBNAME?sslmode=require
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=5
DB_POOL_RECYCLE=1800
DB_POOL_PRE_PING=1
DB_SSLMODE=require

# --- Feature flags ---
# WIZARD_BUDGET_* habilitan el nuevo flujo de presupuestos (shadow mode recomendado en DEV).
WIZARD_BUDGET_BREAKDOWN_ENABLED=false
WIZARD_BUDGET_SHADOW_MODE=true
# SHOW_IA_CALCULATOR_BUTTON controla el acceso rápido a la calculadora IA.
SHOW_IA_CALCULATOR_BUTTON=false
# ENABLE_REPORTS activa la generación de PDF con WeasyPrint.
ENABLE_REPORTS=1
# ENABLE_GOOGLE_OAUTH_HELP muestra hints para configurar OAuth en onboarding.
ENABLE_GOOGLE_OAUTH_HELP=true

# --- Google OAuth (opcional) ---
GOOGLE_OAUTH_CLIENT_ID=
GOOGLE_OAUTH_CLIENT_SECRET=
# Callback típico: ${BASE_URL}/login/google/callback

# --- Mercado Pago (por ahora detrás de flag de marketplace) ---
# No es necesario configurarlo para correr la app mientras el marketplace esté deshabilitado.
MP_ACCESS_TOKEN=
MP_WEBHOOK_PUBLIC_URL=${BASE_URL}/api/market/payments/mp/webhook

# --- SMTP ---
# En DEV: Mailtrap; en STAGING/PROD: proveedor transaccional (SendGrid/SES/...)
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_USER=
SMTP_PASS=
SMTP_PASSWORD=${SMTP_PASS}
SMTP_USE_TLS=1
FROM_EMAIL=OBYRA IA <no-reply@obyra.local>
MAIL_FROM=${FROM_EMAIL}

# --- Mapas / Geocoding ---
MAPS_PROVIDER=nominatim
MAPS_API_KEY=
MAPS_USER_AGENT=obyra-dev-bot
GEOCODE_CACHE_TTL=3600

# --- Tipos de cambio ---
FX_PROVIDER=bna
EXCHANGE_FALLBACK_RATE=0

# --- IA / OpenAI (opcional) ---
OPENAI_API_KEY=

# --- Negocio ---
PLATFORM_COMMISSION_RATE=0.02

# --- Archivos / URLs ---
STORAGE_DIR=./storage
BASE_URL=http://127.0.0.1:8080
APP_BASE_URL=${BASE_URL}

# --- Notas de entorno ---
# STAGING / PROD:
#   FLASK_ENV=production
#   BASE_URL=https://staging.obyra.example
#   DATABASE_URL=postgresql+psycopg://USER:PASS@HOST:PORT/DBNAME?sslmode=verify-full
#   DB_POOL_SIZE=20
#   DB_MAX_OVERFLOW=5
#   DB_POOL_PRE_PING=1
#   DB_POOL_RECYCLE=1800
#   DB_SSLMODE=verify-full (si se usa CA personalizada)
